{"version":3,"sources":["component/upload.js","component/tips.js","view/home.js"],"names":["Image","styled","img","Result","div","H1","h1","Dragger","Upload","Component","observer","useStore","ImageStore","UserStore","ref1","useRef","ref2","store","useLocalStore","width","setWidth","w","height","setHeight","h","serverFile","attributes","url","widthStr","heightStr","props","beforeUpload","file","setFile","setFileName","name","currentUser","message","warning","test","type","size","error","upLoad","then","console","log","success","catch","finally","isUploading","tip","spinning","className","InboxOutlined","target","href","fileName","alt","src","ref","onChange","current","value","placeholder","fullStr","Tips","children","Home"],"mappings":"mNAOMA,EAAMC,IAAOC,IAAR,8CAGLC,EAAOF,IAAOG,IAAR,sFAMNC,EAAGJ,IAAOK,GAAR,gEAKAC,EAAYC,IAAZD,QAoHOE,EAlHEC,aAAS,WAAI,MAEOC,cAAxBC,EAFiB,EAEjBA,WAAYC,EAFK,EAELA,UACdC,EAAKC,mBACLC,EAAKD,mBACLE,EAAMC,aAAc,iBAAK,CAC3BC,MAAM,KACNC,SAF2B,SAElBC,GACLJ,EAAME,MAAME,GAEhB,eACI,OAAOJ,EAAME,MAAN,aAAkBF,EAAME,OAAQ,IAE3CG,OAAO,KACPC,UAT2B,SASjBC,GACPP,EAAMK,OAAOE,GAEhB,gBACI,OAAOP,EAAMK,OAAN,aAAmBL,EAAMK,QAAS,IAE7C,cACI,OAAOV,EAAWa,WAAWC,WAAWC,IAAID,WAAWC,IAAhD,gBAAsEV,EAAMW,SAAWX,EAAMY,eAatGC,EAAM,CAETC,aAAc,SAAAC,GAIV,OAFApB,EAAWqB,QAAQD,GACnBpB,EAAWsB,YAAYF,EAAKG,MACF,MAAvBtB,EAAUuB,aACTC,IAAQC,QAAQ,+CACT,GAEN,wCAAwCC,KAAKP,EAAKQ,MAIpDR,EAAKS,MAAO,QACXJ,IAAQK,MAAM,4EACP,IAEX9B,EACC+B,SACAC,MAAK,SAACnB,GAAcoB,QAAQC,IAAIrB,GAAYY,IAAQU,QAAQ,4BAAQF,QAAQC,IAAI,+BAChFE,OAAM,SAACN,GAASG,QAAQC,IAAIJ,GAAOL,IAAQK,MAAM,4BAASG,QAAQC,IAAI,+BACtEG,SAAQ,WAAKrC,EAAWsC,aAAY,EAAML,QAAQC,IAAI,gCAChD,IAZHT,IAAQK,MAAM,6FACP,KAqBnB,OACI,qCACA,cAAC,IAAD,CAAMS,IAAI,qBAAMC,SAAUxC,EAAWsC,YAArC,SACA,eAAC3C,EAAD,2BAAauB,GAAb,cACA,mBAAGuB,UAAU,uBAAb,SACA,cAACC,EAAA,EAAD,MAEA,mBAAGD,UAAU,kBAAb,0EAGA,mBAAGA,UAAU,kBAAb,iKAMOzC,EAAWa,WAAW,eAACtB,EAAD,WACrB,cAACE,EAAD,uCACD,8BACI,+BACC,0DACD,mCAAK,mBAAIkD,OAAO,QAAQC,KAAM5C,EAAWa,WAAWC,WAAWC,IAAID,WAAWC,IAAzE,SAA+Ef,EAAWa,WAAWC,WAAWC,IAAID,WAAWC,MAApI,OACA,oDACA,6BAAKf,EAAW6C,WAChB,0DACA,6BACI,cAACzD,EAAD,CAAO0D,IAAI,2BAAQC,IAAK/C,EAAWa,WAAWC,WAAWC,IAAID,WAAWC,QAE5E,0DACA,+BACC,uBAAOiC,IAAK9C,EAAM+C,SAxEX,WACnB5C,EAAMG,SAASN,EAAKgD,QAAQC,QAuE8BC,YAAY,qDAC1D,uBAAQJ,IAAK5C,EAAO6C,SAtEZ,WACpB5C,EAAMM,UAAUP,EAAK8C,QAAQC,QAqE+BC,YAAY,wDAE7D,6BACI,mBAAGT,OAAO,SAASC,KAAOvC,EAAMgD,QAAhC,SAA0ChD,EAAMgD,oBAMtD,WC7HXC,EAAKjE,IAAOG,IAAR,kIAqBMK,EAZCC,aAAS,YAAe,IAAbyD,EAAY,EAAZA,SACbtD,EAAYF,cAAZE,UACP,OACG,mCAEIA,EAAUuB,YAAc,KAAK,cAAC8B,EAAD,UAAOC,SCb7CC,EAAK1D,aAAS,WAEhB,OACI,qCACA,cAAC,EAAD,4EACA,cAAC,EAAD,UAOO0D","file":"static/js/9.796ca825.chunk.js","sourcesContent":["import React  , { useRef } from \"react\";\r\nimport { useStore } from \"../store\";\r\nimport {observer, useLocalStore } from  \"mobx-react\"\r\nimport { Upload, message,Spin,Switch,Alert } from 'antd';\r\nimport { InboxOutlined } from '@ant-design/icons';\r\nimport styled from 'styled-components';\r\n\r\nconst Image=styled.img`\r\nmax-width:300px;\r\n`\r\nconst Result=styled.div`\r\nmargin-top:30px;\r\nborder:2px dashed #ccc;\r\npadding:20px;\r\n`\r\n\r\nconst H1=styled.h1`\r\nmargin:20px 0;\r\ntext-align:center;\r\n`\r\n\r\nconst { Dragger } = Upload;\r\n\r\n const Component=observer(()=>{\r\n    // console.log('1') \r\n     const { ImageStore, UserStore} =useStore()\r\n     const ref1=useRef();\r\n     const ref2=useRef();\r\n     const store=useLocalStore(()=>({\r\n         width:null,\r\n         setWidth(w){\r\n             store.width=w;\r\n         },\r\n         get widthStr(){\r\n             return store.width?`/w/${store.width}`:''; \r\n         },\r\n         height:null,\r\n         setHeight(h){\r\n            store.height=h;\r\n        },\r\n         get heightStr(){\r\n             return store.height?`/h/${store.height}`:'';\r\n         },\r\n         get fullStr(){\r\n             return ImageStore.serverFile.attributes.url.attributes.url+`?imageView2/0` + store.widthStr + store.heightStr;\r\n         }\r\n     }))\r\n       \r\n     const bindWidthChange=()=>{\r\n        store.setWidth(ref1.current.value)\r\n     }\r\n     const bindHeightChange=()=>{\r\n        store.setHeight(ref2.current.value)\r\n     }\r\n\r\n\r\n    //  console.log('2')\r\n     const props={\r\n        // showUploadList: false,\r\n        beforeUpload :file=> {\r\n            // console.log('3') 这里出现了错误，原因是beforeUpload的L不用大写，当前页面出bug了就在当前一面一步一步的执行下去\r\n            ImageStore.setFile(file);\r\n            ImageStore.setFileName(file.name);\r\n            if(UserStore.currentUser==null){\r\n                message.warning('请先登录再上传')\r\n                return false;\r\n            };\r\n            if(!(/(svg$)|(jpg$)|(jpeg$)|(png$)|(bmp$)/ig.test(file.type))){\r\n                message.error('请上传svg、jpg、jpeg、bmp、png格式的图片')\r\n                return false;\r\n            };\r\n            if(file.size >=102400){\r\n                message.error('请上传大小不超过100KB的图片')\r\n                return false;\r\n            }\r\n            ImageStore\r\n            .upLoad()\r\n            .then((serverFile)=>{console.log(serverFile);message.success('上传成功');console.log('上传成功')})\r\n            .catch((error)=>{console.log(error);message.error('上传失败');;console.log('上传失败')})\r\n            .finally(()=>{ImageStore.isUploading=false;console.log('上传完成')})\r\n            return false;\r\n        }\r\n        }\r\n        \r\n    \r\n\r\n\r\n    // console.log('4')    \r\n     \r\n     \r\n    return(\r\n        <>\r\n        <Spin tip=\"上传中\" spinning={ImageStore.isUploading}>\r\n        <Dragger {...props}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n        <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">\r\n           点击或者拖拽上传图片\r\n        </p>\r\n        <p className=\"ant-upload-hint\">\r\n           仅支持jpg、jpeg、bmp、svg、png格式的图片，同时不超过100KB大小\r\n        </p>\r\n       </Dragger> \r\n       </Spin>\r\n           {\r\n               ImageStore.serverFile?<Result>\r\n                <H1>上传结果</H1>\r\n               <div>\r\n                   <dl>\r\n                    <dt>线上地址</dt>\r\n                   <dd> <a  target='_self' href={ImageStore.serverFile.attributes.url.attributes.url}>{ImageStore.serverFile.attributes.url.attributes.url}</a> </dd>\r\n                   <dt>文件名</dt>\r\n                   <dd>{ImageStore.fileName}</dd> \r\n                   <dt>图片预览</dt>\r\n                   <dd>\r\n                       <Image alt='加载失败'  src={ImageStore.serverFile.attributes.url.attributes.url} />      \r\n                   </dd>\r\n                   <dt>更多尺寸</dt>\r\n                   <dd>\r\n                    <input ref={ref1} onChange={bindWidthChange}  placeholder=\"最大宽度（可选）\"/>\r\n                    <input  ref={ref2}  onChange={bindHeightChange} placeholder=\"最大高度（可选）\"/>\r\n                   </dd>\r\n                   <dd>\r\n                       <a target=\"_blank\" href= {store.fullStr}>{store.fullStr}</a>\r\n                   </dd>\r\n                   </dl>\r\n               </div>\r\n               </Result>\r\n               \r\n                :null\r\n           }\r\n       \r\n        </>\r\n    );\r\n});\r\n\r\nexport default Component;","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useStore } from \"../store\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Tips=styled.div`\r\nbackground: orange;\r\ncolor:#fff;\r\npadding:10px;\r\nmargin:30px 0;\r\nfont-size:14px;\r\nborder-radius:5px;\r\n`\r\n\r\nconst Component= observer(({children})=>{\r\n        const {UserStore} =useStore();\r\n        return(\r\n           <>\r\n           {\r\n               UserStore.currentUser ? null:<Tips>{children}</Tips>\r\n           }\r\n           </>\r\n         )\r\n        }\r\n)\r\n\r\nexport default  Component","import React from 'react';\r\nimport { observer } from 'mobx-react';\r\n// import {useStore } from '../store';\r\nimport  Uploader  from '../component/upload';\r\nimport Tips from '../component/tips'\r\n\r\nconst Home=observer(()=>{\r\n    // const {AuthStore,UserStore} =useStore();\r\n    return(\r\n        <>\r\n        <Tips>请先登录再上传 ！！！</Tips>\r\n        <Uploader />\r\n        </>\r\n    )\r\n})\r\n\r\n\r\n\r\nexport default Home;\r\n"],"sourceRoot":""}